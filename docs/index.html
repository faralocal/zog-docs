<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zog.js v0.3.0 | Documentation</title>
    <style>
        :root {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --accent-primary: #38bdf8;
            --accent-secondary: #818cf8;
            --border-color: #475569;
            --code-bg: #1e1e2e;
            --code-text: #f8f8f2;
            --success: #4ade80;
            --warning: #fbbf24;
            --error: #f87171;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, #0c1220 100%);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        #app {
            display: flex;
            flex: 1;
        }

        /* Sidebar Navigation */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 280px;
            height: 100vh;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            padding: 2rem 1.5rem;
            overflow-y: auto;
            z-index: 100;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 2rem;
            letter-spacing: -1px;
        }

        .nav-menu {
            list-style: none;
        }

        .nav-menu li {
            margin-bottom: 0.5rem;
        }

        .nav-menu a {
            display: block;
            padding: 0.75rem 1rem;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }

        .nav-menu a:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            transform: translateX(4px);
        }

        .nav-menu a.active {
            background: var(--bg-tertiary);
            color: var(--accent-primary);
            border-left-color: var(--accent-primary);
            font-weight: 600;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 3rem 2rem;
            max-width: 1200px;
        }

        section {
            margin-bottom: 4rem;
            scroll-margin-top: 2rem;
        }

        h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800;
        }

        h2 {
            font-size: 2rem;
            margin: 2.5rem 0 1rem;
            color: var(--text-primary);
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0.5rem;
            font-weight: 700;
        }

        h3 {
            font-size: 1.5rem;
            margin: 2rem 0 0.75rem;
            color: var(--accent-primary);
            font-weight: 600;
        }

        p {
            margin-bottom: 1rem;
            color: var(--text-secondary);
        }

        ul,
        ol {
            margin-left: 1.5rem;
            margin-bottom: 1rem;
        }

        li {
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
        }

        /* Code Blocks */
        pre {
            background: var(--code-bg);
            border-radius: 12px;
            padding: 1.5rem;
            overflow-x: auto;
            margin: 1.5rem 0;
            border: 1px solid var(--border-color);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        code {
            font-family: 'Fira Code', 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
            color: var(--code-text);
        }

        pre code {
            color: var(--code-text);
        }

        /* Inline Code */
        p code,
        li code {
            background: var(--bg-tertiary);
            padding: 0.25rem 0.5rem;
            border-radius: 6px;
            font-size: 0.85rem;
            color: var(--accent-primary);
        }

        /* Syntax Highlighting */
        .token-keyword {
            color: #f472b6;
        }

        .token-string {
            color: #a5f3fc;
        }

        .token-number {
            color: #fde047;
        }

        .token-comment {
            color: #94a3b8;
            font-style: italic;
        }

        .token-function {
            color: #60a5fa;
        }

        .token-variable {
            color: #c084fc;
        }

        .token-operator {
            color: #f87171;
        }

        /* Table */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 2rem 0;
            background: var(--bg-secondary);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        th,
        td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        th {
            background: var(--bg-tertiary);
            font-weight: 600;
            color: var(--accent-primary);
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:hover {
            background: rgba(56, 189, 248, 0.05);
        }

        /* Badge */
        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background: var(--accent-primary);
            color: var(--bg-primary);
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 0.5rem;
        }

        .badge-new {
            background: var(--success);
        }

        .badge-updated {
            background: var(--warning);
        }

        /* Links */
        a {
            color: var(--accent-primary);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        a:hover {
            color: var(--accent-secondary);
            text-decoration: underline;
        }

        /* Footer */
        footer {
            background: var(--bg-secondary);
            border-top: 1px solid var(--border-color);
            padding: 3rem 2rem;
            margin-top: auto;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .footer-section {
            margin-bottom: 2rem;
        }

        .footer-links h4 {
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        .footer-links ul {
            list-style: none;
            margin: 0;
        }

        .footer-links li {
            margin-bottom: 0.5rem;
        }

        .footer-divider {
            border-top: 1px solid var(--border-color);
            padding-top: 2rem;
            text-align: center;
        }

        .footer-copyright {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
            }

            .main-content {
                margin-left: 0;
                padding: 2rem 1rem;
            }

            h1 {
                font-size: 2rem;
            }

            h2 {
                font-size: 1.5rem;
            }
        }
    </style>
</head>

<body>
    <div id="app">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">Zog.js v0.3.0</div>
            <nav>
                <ul class="nav-menu">
                    <li><a href="#highlights" @click.prevent="scrollTo('highlights')">Highlights</a></li>
                    <li><a href="#quick-start" @click.prevent="scrollTo('quick-start')">Quick Start</a></li>
                    <li><a href="#core-concepts" @click.prevent="scrollTo('core-concepts')">Core Concepts</a></li>
                    <li><a href="#api-reference" @click.prevent="scrollTo('api-reference')">API Reference</a></li>
                    <li><a href="#hooks" @click.prevent="scrollTo('hooks')">Hook System <span class="badge badge-new">NEW</span></a></li>
                    <li><a href="#examples" @click.prevent="scrollTo('examples')">Examples</a></li>
                    <li><a href="#template-directives" @click.prevent="scrollTo('template-directives')">Template Directives</a></li>
                    <li><a href="#plugins" @click.prevent="scrollTo('plugins')">Plugin System</a></li>
                    <li><a href="#tips" @click.prevent="scrollTo('tips')">Tips & Gotchas</a></li>
                    <li><a href="#development" @click.prevent="scrollTo('development')">Development</a></li>
                    <li><a href="#license" @click.prevent="scrollTo('license')">License</a></li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <section id="highlights">
                <h1>Zog.js Documentation</h1>
                <p class="subtitle">Full reactivity with minimal code size</p>

                <h2>Highlights</h2>
                <ul z-pre>
                    <li>Reactive primitives: <code>ref</code>, <code>reactive</code>, <code>computed</code></li>
                    <li>Effects: <code>watchEffect</code></li>
                    <li>Lightweight template compiler for declarative DOM binding and interpolation (<code>{{ }}</code>)
                    </li>
                    <li>Template directives: <code>z-if</code>, <code>z-for</code>, <code>z-text</code>,
                        <code>z-html</code>, <code>z-show</code>, <code>z-model</code>, <code>z-on</code> (shorthand
                        <code>@</code>)
                    </li>
                    <li>Dynamic attribute binding with <code>:attribute</code> syntax</li>
                    <li>App lifecycle: <code>createApp(...).mount(selector)</code> and <code>.unmount()</code></li>
                    <li>Hook system: <code>addHook</code>, <code>removeHook</code> for lifecycle events <span class="badge badge-new">NEW</span></li>
<li>Plugin system: <code>createApp().use(plugin)</code> for extending functionality</li>

                            
                </ul>
            </section>

            <section z-pre id="quick-start">
                <h2>Quick Start</h2>
                <h3>Using the CDN</h3>
                <p>The fastest way to get started is using the Zog.js CDN:</p>
                <pre><code>&lt;script type="module"&gt;
    import { createApp, ref } from 'https://cdn.zogjs.com/zog.es.js';

    createApp(() => {
        const count = ref(0);
        const increment = () => count.value++;

        return { count, increment };
    }).mount('#app');
&lt;/script&gt;</code></pre>

                <h3>Complete Example</h3>
                <pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;title&gt;Zog.js Counter&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div id="app"&gt;
        &lt;h1&gt;{{ title }}&lt;/h1&gt;
        &lt;p&gt;Current count: {{ count }}&lt;/p&gt;
        &lt;button @click="increment"&gt;Increment&lt;/button&gt;
    &lt;/div&gt;

    &lt;script type="module"&gt;
        import { createApp, ref } from 'https://cdn.zogjs.com/zog.es.js';

        createApp(() => {
            const title = ref('Counter App');
            const count = ref(0);
            const increment = () => count.value++;

            return { title, count, increment };
        }).mount('#app');
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
            </section>

            <section z-pre id="core-concepts">
                <h2>Core Concepts</h2>

                <h3>Reactivity Primitives</h3>
                <ul>
                    <li><code>ref(initialValue)</code> — creates a reactive reference with <code>.value</code></li>
                    <li><code>reactive(object)</code> — returns a reactive proxy of an object (deep reactive for nested
                        objects and arrays)</li>
                    <li><code>computed(getter)</code> — memoized reactive value that recomputes when dependencies change
                    </li>
                    <li><code>watchEffect(fn, opts?)</code> — run a reactive effect immediately and re-run when
                        dependencies change</li>
                </ul>

                <h3>Template Interpolation</h3>
                <p>Any text node containing <code>{{ expression }}</code> will be evaluated against the component scope:
                </p>
                <pre><code>&lt;p&gt;Hello, {{ name }} — you have {{ items.length }} items.&lt;/p&gt;</code></pre>

                <h3>Template Directives</h3>
                <p>The compiler supports a small set of directives for common tasks:</p>
                <ul>
                    <li><code>z-if="expression"</code> — render element only when truthy</li>
                    <li><code>z-else-if="expression"</code> and <code>z-else</code> — chainable conditional branches
                    </li>
                    <li><code>z-for="item in list"</code> — repeat an element for each item. Supports <code>:key</code>
                        attribute for optimized diffing</li>
                    <li><code>z-text="expression"</code> — set <code>textContent</code></li>
                    <li><code>z-html="expression"</code> — set <code>innerHTML</code></li>
                    <li><code>z-show="expression"</code> — toggles <code>display</code> (<code>none</code> when falsy)
                    </li>
                    <li><code>z-model="prop"</code> — two-way binding for inputs</li>
                    <li><code>z-on:event="handler"</code> or <code>@event="handler"</code> — attach event listener</li>
                    <li><code>:attribute="expression"</code> — bind any attribute dynamically (style objects, class
                        objects, boolean attributes)</li>
                </ul>

                
            </section>

            <section z-pre id="api-reference">
                <h2>API Reference</h2>

                <h3><code>ref(value)</code></h3>
                <p>Creates a reactive reference.</p>
                <pre><code>const count = ref(0);
count.value = 2; // Set value
console.log(count.value); // Get value</code></pre>

                <h3><code>reactive(obj)</code></h3>
                <p>Wraps an object or array in a reactive proxy. Supports deep reactivity for nested structures.</p>
                <pre><code>const state = reactive({ todos: [] });
state.todos.push('New item'); // Reactive!</code></pre>

                <h3><code>computed(getter)</code></h3>
                <p>Creates a lazily evaluated computed value.</p>
                <pre><code>const doubled = computed(() => count.value * 2);
console.log(doubled.value); // Access computed value</code></pre>

                <h3><code>watchEffect(fn, opts?)</code></h3>
                <p>Run <code>fn</code> immediately, re-run whenever a reactive dependency changes.</p>
                <pre><code>const stop = watchEffect(() => {
    console.log('Count is:', count.value);
});

// Later: stop watching
stop();</code></pre>

                <h3><code>createApp(setup)</code></h3>
                <p>Creates an app instance. <code>setup</code> returns the reactive scope for templates.</p>
                <pre><code>const app = createApp(() => {
    return { /* scope */ };
});

app.mount('#app'); // Mount to DOM
app.unmount(); // Cleanup</code></pre>

                <h3><code>use(plugin, options?)</code> <span class="badge badge-new">NEW</span></h3>
                <p>Install a plugin to extend Zog.js functionality.</p>
                <pre><code>const MyPlugin = {
    install(zog, options) {
        // Plugin logic here
        console.log('Plugin installed!', options);
    }
};

use(MyPlugin, { theme: 'dark' });</code></pre>

                <h3><code>nextTick(fn?)</code></h3>
                <p>Waits for the next DOM update cycle before executing a callback. Returns a Promise.</p>
                <pre><code>import { nextTick } from './zog.js';

count.value++;
await nextTick();
console.log('DOM has been updated!');</code></pre>

                <h3><code>addHook(name, fn)</code> <span class="badge badge-new">NEW</span></h3>
                <p>Registers a lifecycle hook. Available hooks: <code>beforeCompile</code>, <code>afterCompile</code>, <code>beforeEffect</code>, <code>onError</code>.</p>
                <pre><code>import { addHook } from './zog.js';

addHook('beforeEffect', (effect) => {
    console.log('Effect running:', effect.id);
});</code></pre>

                <h3><code>removeHook(name, fn)</code> <span class="badge badge-new">NEW</span></h3>
                <p>Removes a previously registered hook.</p>
                <pre><code>import { removeHook } from './zog.js';

const myHook = (effect) => console.log(effect);
addHook('beforeEffect', myHook);

// Later...
removeHook('beforeEffect', myHook);</code></pre>
            </section>

            <section z-pre id="hooks">
                <h2>Hook System <span class="badge badge-new">NEW</span></h2>
                <p>Version 0.3.0 introduces a powerful Hook system that allows you to tap into Zog.js internal lifecycle
                    events. Perfect for debugging, logging, performance monitoring, and extending functionality.</p>

                <h3>Available Hooks</h3>
                <table>
                    <tr>
                        <th>Hook Name</th>
                        <th>Parameters</th>
                        <th>Description</th>
                    </tr>
                    <tr>
                        <td><code>beforeCompile</code></td>
                        <td><code>(el, scope, cs)</code></td>
                        <td>Runs before an element is compiled. Return <code>false</code> to skip compilation of that
                            element.</td>
                    </tr>
                    <tr>
                        <td><code>afterCompile</code></td>
                        <td><code>(el, scope, cs)</code></td>
                        <td>Runs after an element and its children have been compiled successfully.</td>
                    </tr>
                    <tr>
                        <td><code>beforeEffect</code></td>
                        <td><code>(effect)</code></td>
                        <td>Triggered every time a reactive effect is about to run.</td>
                    </tr>
                    <tr>
                        <td><code>onError</code></td>
                        <td><code>(error, source, args)</code></td>
                        <td>Global error handler for compilation errors, event handler errors, and plugin errors.</td>
                    </tr>
                </table>

                <h3>Adding and Removing Hooks</h3>
                <pre><code>import { addHook, removeHook } from './zog.js';

// Add a hook
const myHook = (effect) => {
    console.log('Effect running with ID:', effect.id);
};

addHook('beforeEffect', myHook);

// Remove it later when no longer needed
removeHook('beforeEffect', myHook);</code></pre>

                <h3>Example: Performance Monitor</h3>
                <pre><code>import { addHook } from './zog.js';

addHook('beforeEffect', (effect) => {
    const start = performance.now();
    effect._startTime = start;
    console.log(`⏱️ Effect ${effect.id} starting...`);
});

addHook('onError', (error, source, args) => {
    console.error(`❌ Error in ${source}:`, error);
    // Send to analytics service
    sendToAnalytics({ error, source, timestamp: Date.now() });
});</code></pre>

                <h3>Use Cases</h3>
                <ul>
                    <li><strong>Debugging:</strong> Log every reactive update to understand application behavior</li>
                    <li><strong>Performance Monitoring:</strong> Track effect execution times and optimize bottlenecks
                    </li>
                    <li><strong>Error Tracking:</strong> Capture and send errors to monitoring services like Sentry</li>
                    <li><strong>Development Tools:</strong> Build custom devtools extensions with lifecycle visibility
                    </li>
                    <li><strong>Testing:</strong> Verify that effects run in the correct order during tests</li>
                </ul>
            </section>

            <section z-pre id="examples">
                <h2>Examples</h2>

                <h3>Simple Counter</h3>
                <pre><code>&lt;div id="counter"&gt;
  &lt;p&gt;Count: &lt;span z-text="count"&gt;&lt;/span&gt;&lt;/p&gt;
  &lt;button @click="inc"&gt;+1&lt;/button&gt;
&lt;/div&gt;

&lt;script type="module"&gt;
import { createApp, ref } from 'https://cdn.zogjs.com/zog.es.js';

createApp(() => {
  const count = ref(0);
  const inc = () => count.value++;
  return { count, inc };
}).mount('#counter');
&lt;/script&gt;</code></pre>

                <h3>Todo List with Reactive Arrays</h3>
                <pre><code>&lt;div id="todo"&gt;
  &lt;input z-model="newItem" placeholder="Add todo" /&gt;
  &lt;button @click="add"&gt;Add&lt;/button&gt;

  &lt;ul&gt;
    &lt;li z-for="(item, i) in todos" :key="item"&gt;
      {{ i + 1 }}. {{ item }}
      &lt;button @click="remove(i)"&gt;remove&lt;/button&gt;
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;

&lt;script type="module"&gt;
import { createApp, reactive, ref } from 'https://cdn.zogjs.com/zog.es.js';

createApp(() => {
  const state = reactive({ todos: ['Buy milk'] });
  const newItem = ref('');

  function add() {
    if (newItem.value.trim()) {
      state.todos.push(newItem.value.trim());
      newItem.value = '';
    }
  }

  function remove(i) {
    state.todos.splice(i, 1);
  }

  return { todos: state.todos, newItem, add, remove };
}).mount('#todo');
&lt;/script&gt;</code></pre>

                <h3>Dynamic Styling and Classes</h3>
                <pre><code>&lt;div id="styling"&gt;
  &lt;button @click="toggleActive"&gt;Toggle Active&lt;/button&gt;
  &lt;div 
    :class="{ active: isActive, 'text-bold': true }"
    :style="{ color: textColor, fontSize: size + 'px' }"&gt;
    Styled content
  &lt;/div&gt;
&lt;/div&gt;

&lt;script type="module"&gt;
import { createApp, ref } from 'https://cdn.zogjs.com/zog.es.js';

createApp(() => {
  const isActive = ref(false);
  const textColor = ref('blue');
  const size = ref(16);
  
  const toggleActive = () => isActive.value = !isActive.value;
  
  return { isActive, textColor, size, toggleActive };
}).mount('#styling');
&lt;/script&gt;</code></pre>


<h3>Unmounting Applications</h3>
<p>When you need to clean up an application instance (e.g., in SPAs or dynamic component mounting), use the <code>unmount()</code> method:</p>
<pre><code>const app = createApp(setup).mount('#app');

// Later, when component is removed:
app.unmount(); // Cleans up all effects, listeners, and scopes</code></pre>
            </section>

            <section z-pre id="template-directives">
                <h2>Template Directives</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Directive</th>
                            <th>Purpose</th>
                            <th>Example</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>{{ expr }}</code></td>
                            <td>Interpolate JS expression from scope</td>
                            <td><code>&lt;p&gt;Hello, {{ name }}&lt;/p&gt;</code></td>
                        </tr>
                        <tr>
                            <td><code>z-if</code> / <code>z-else-if</code> / <code>z-else</code></td>
                            <td>Conditional rendering</td>
                            <td><code>&lt;div z-if="isOpen"&gt;Open&lt;/div&gt;</code></td>
                        </tr>
                        <tr>
                            <td><code>z-for</code></td>
                            <td>Loop: <code>item in list</code> or <code>(item, i) in list</code></td>
                            <td><code>&lt;li z-for="(item, i) in items"&gt;{{ i }} - {{ item }}&lt;/li&gt;</code></td>
                        </tr>
                        <tr>
                            <td><code>:key</code></td>
                            <td>Unique key for z-for optimization</td>
                            <td><code>&lt;li z-for="item in items" :key="item.id"&gt;</code></td>
                        </tr>
                        <tr>
                            <td><code>z-text</code></td>
                            <td>Set <code>textContent</code></td>
                            <td><code>&lt;p z-text="message"&gt;&lt;/p&gt;</code></td>
                        </tr>
                        <tr>
                            <td><code>z-html</code></td>
                            <td>Set <code>innerHTML</code></td>
                            <td><code>&lt;div z-html="rawHtml"&gt;&lt;/div&gt;</code></td>
                        </tr>
                        <tr>
                            <td><code>z-show</code></td>
                            <td>Toggle display (style)</td>
                            <td><code>&lt;div z-show="visible"&gt;...&lt;/div&gt;</code></td>
                        </tr>
                        <tr>
                            <td><code>z-model</code></td>
                            <td>Two-way binding with inputs</td>
                            <td><code>&lt;input z-model="value" /&gt;</code></td>
                        </tr>
                        <tr>
                            <td><code>z-on:event</code> or <code>@event</code></td>
                            <td>Event listener</td>
                            <td><code>&lt;button @click="handle"&gt;Click&lt;/button&gt;</code></td>
                        </tr>
                        <tr>
                            <td><code>:attribute</code></td>
                            <td>Dynamic attribute binding</td>
                            <td><code>&lt;div :id="dynamicId" :disabled="isDisabled"&gt;</code></td>
                        </tr>
                        <tr>
                            <td><code>:class</code></td>
                            <td>Dynamic class binding (object/string)</td>
                            <td><code>&lt;div :class="{ active: isActive }"&gt;</code></td>
                        </tr>
                        <tr>
                            <td><code>:style</code></td>
                            <td>Dynamic style binding (object)</td>
                            <td><code>&lt;div :style="{ color: textColor }"&gt;</code></td>
                        </tr>
                    </tbody>
                </table>
                <p><strong>Notes:</strong></p>
                <ul>
                    <li>Event directive accepts a scope function or expression (<code>@click="doSomething"</code> where
                        <code>doSomething</code> exists in scope).
                    </li>
                    <li><code>z-for</code> supports <code>in</code> and <code>of</code> and <code>(item, index)</code>
                        tuple syntax.</li>
                    <li>Use <code>:key</code> in <code>z-for</code> loops for better performance when lists change.</li>
                    <li>Boolean attributes (like <code>disabled</code>, <code>checked</code>) are handled automatically
                        with <code>:</code> binding.</li>
                </ul>
            </section>

            <section z-pre id="plugins">
                <h2>Plugin System</h2>
                <p>Zog.js supports a powerful plugin architecture. Plugins receive full access to the core API and
                    internal utilities, enabling deep extensions of the framework.</p>

                <h3>Plugin API</h3>
                <p>When you install a plugin, it receives an object with:</p>
                <ul>
                    <li><strong>Core Functions:</strong> <code>reactive</code>, <code>ref</code>, <code>computed</code>,
                        <code>watchEffect</code>, <code>createApp</code>
                    </li>
                    <li><strong>Hook Management:</strong> <code>addHook</code>, <code>removeHook</code></li>
                    <li><strong>Internal Utilities:</strong> Exposed via <code>utils</code> object:
                        <ul>
                            <li><code>isObj</code> - Check if value is an object</li>
                            <li><code>evalExp</code> - Safely evaluate expressions</li>
                            <li><code>Dep</code> - Dependency tracking class</li>
                            <li><code>ReactiveEffect</code> - Effect system class</li>
                            <li><code>Scope</code> - Component scope manager</li>
                            <li><code>compile</code> - Template compilation function</li>
                        </ul>
                    </li>
                </ul>

                <h3>Creating a Plugin</h3>
                <pre><code>// router-plugin.js
const RouterPlugin = {
    install(app, options) {
        const { reactive, watchEffect, addHook } = app;
        
        // Create reactive route object
        const route = reactive({ 
            path: window.location.pathname,
            query: new URLSearchParams(window.location.search)
        });
        
        // Listen to browser navigation
        window.addEventListener('popstate', () => {
            route.path = window.location.pathname;
        });
        
        // Optional: Add lifecycle hooks
        addHook('afterCompile', (el) => {
            console.log('Route component compiled:', el.tagName);
        });
        
        // Return API to be merged into app
        return { route };
    }
};

export default RouterPlugin;</code></pre>

                <h3>Using a Plugin</h3>
                <pre><code>import { createApp } from './zog.js';
import RouterPlugin from './router-plugin.js';

const app = createApp(setup)
    .use(RouterPlugin, { basePath: '/' })
    .mount('#app');</code></pre>

                <h3>Plugin Return Values</h3>
                <p>Plugins can optionally return an object that will be merged into the application context, or return
                    the app instance itself for method chaining.</p>

                <h3>Plugin Use Cases</h3>
                <ul>
                    <li>Routing systems with history management</li>
                    <li>Global state management solutions</li>
                    <li>Form validation libraries</li>
                    <li>HTTP client wrappers</li>
                    <li>Animation helpers</li>
                    <li>Devtools integrations</li>
                </ul>
            </section>

            <section z-pre id="tips">
                <h2>Tips & Gotchas</h2>
                <ul>
                    <li>Template expressions are evaluated against the scope object returned by your
                        <code>setup()</code> function.
                    </li>
                    <li>Refs must be accessed with <code>.value</code> in JavaScript, but are automatically unwrapped in
                        templates.</li>
                    <li>Array reactivity is fully supported - methods like <code>push</code>, <code>pop</code>,
                        <code>splice</code> trigger updates automatically.
                    </li>
                    <li>Use <code>:key</code> in <code>z-for</code> loops for better performance when lists change.</li>
                    <li>The library is ESM: import using <code>type="module"</code> or bundle with a bundler (Vite,
                        Webpack, Rollup).</li>
                    <li><code>z-html</code> can cause XSS vulnerabilities - only use with trusted content.</li>
                </ul>

                <h3>Performance Optimizations</h3>
                <p>Zog.js v0.3.0 includes several optimizations:</p>
                <ul>
                    <li><strong>Expression caching</strong>: Compiled template expressions are cached (limit: 200) for
                        better performance</li>
                    <li><strong>Unified array handling</strong>: Single method handler for all array operations</li>
                    <li><strong>Key-based diffing</strong>: Use <code>:key</code> attribute in <code>z-for</code> loops
                        for efficient list updates</li>
                    <li><strong>Batched updates</strong>: Reactive changes are batched and executed in microtasks</li>
                    <li><strong>Lazy computed values</strong>: Computed properties only recalculate when accessed and
                        dependencies change</li>
                </ul>
            </section>

            <section z-pre id="development">
                <h2>Development & Contributing</h2>
                <ul>
                    <li>The repository contains the single-file implementation <code>zog.js</code>.</li>
                    <li>To experiment, create an HTML page with <code>&lt;script type="module"&gt;</code> and import
                        from the CDN or local file.</li>
                    <li>If you plan to add features or refactors:
                        <ul>
                            <li>Keep the public API stable (exports listed above).</li>
                            <li>Document any additional template directives clearly.</li>
                            <li>Add minimal reproducible examples for each new feature.</li>
                            <li>Ensure optimizations don't introduce bugs - test thoroughly.</li>
                        </ul>
                    </li>
                </ul>

                <h3>What's New in v0.3.0</h3>
                <p><strong>New Features:</strong></p>
                <ul>
                    <li><strong>Hook System:</strong> <code>addHook()</code> and <code>removeHook()</code> for tapping
                        into internal lifecycle events</li>
                    <li><strong>Enhanced Plugin API:</strong> Plugins now receive <code>utils</code> object with
                        internal classes and functions</li>
                    <li><strong>nextTick() restored:</strong> Convenient helper for waiting on DOM updates</li>
                    <li><strong>Improved Error Handling:</strong> Global <code>onError</code> hook catches compilation
                        and runtime errors</li>
                    <li><strong>Better Array Reactivity:</strong> All array methods including iterators are fully
                        reactive</li>
                </ul>
            </section>

            <section z-pre id="license">
                <h2>License</h2>
                <p>Zog.js is open-source software licensed under the MIT License.</p>
                <p>You are free to use, modify, and distribute this project in commercial or non-commercial
                    applications.</p>
                <p>For full details, see the <a href="/LICENSE">LICENSE</a> file.</p>
            </section>
        </main>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <div class="footer-links">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="https://zogjs.com" target="_blank" rel="noopener noreferrer"
                                class="website">Official Website</a></li>
                        <li><a href="https://github.com/zogjs/zogjs" target="_blank" rel="noopener noreferrer"
                                class="github">GitHub Repository</a></li>
                        <li><a href="https://marketplace.visualstudio.com/items?itemName=zogjs.zogjs-support"
                                target="_blank" rel="noopener noreferrer" class="vscode">VS Code Extension</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-divider">
                <p class="footer-copyright">&copy; 2024 Zog.js. All rights reserved.</p>
                <p class="footer-copyright">Made with ❤️ for reactive web development</p>
            </div>
        </div>
    </footer>

    <!-- Zog.js from CDN -->
    <script type="module">
        import { createApp, ref, watchEffect, addHook } from 'https://cdn.zogjs.com/zog.es.js';


        createApp(() => {
            
            addHook('beforeCompile', (el, scope, cs) => {
                if (el.hasAttribute && el.hasAttribute('z-pre')) {                    
                    el.removeAttribute('z-pre'); // حذف attribute
                    return false; // stop compilation
                }
            });


            const activeSection = ref('highlights');
            const sections = [
                'highlights', 'quick-start', 'core-concepts', 
                'api-reference', 'hooks', 'examples', 'template-directives',
                'plugins', 'tips', 'development', 'license'
            ];

            // Smooth scroll to section
            const scrollTo = (id) => {
                const element = document.getElementById(id);
                if (element) {
                    element.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    activeSection.value = id;
                }
            };

            // Update active nav based on scroll position
            const handleScroll = () => {
                const yOffset = window.pageYOffset;
                const buffer = 100;

                for (const sectionId of sections) {
                    const element = document.getElementById(sectionId);
                    if (element) {
                        const rect = element.getBoundingClientRect();
                        const top = rect.top + window.pageYOffset - buffer;
                        const bottom = top + element.offsetHeight;

                        if (yOffset >= top && yOffset < bottom) {
                            if (activeSection.value !== sectionId) {
                                activeSection.value = sectionId;
                            }
                            break;
                        }
                    }
                }
            };

            // Apply active class to nav links
            watchEffect(() => {
                document.querySelectorAll('.nav-menu a').forEach(link => {
                    const href = link.getAttribute('href');
                    const id = href?.substring(1);
                    if (id === activeSection.value) {
                        link.classList.add('active');
                    } else {
                        link.classList.remove('active');
                    }
                });
            });

            // Throttled scroll handler
            let ticking = false;
            const onScroll = () => {
                if (!ticking) {
                    window.requestAnimationFrame(() => {
                        handleScroll();
                        ticking = false;
                    });
                    ticking = true;
                }
            };

            // Setup scroll listener
            window.addEventListener('scroll', onScroll, { passive: true });

            // Initial highlight
            Promise.resolve().then(() => {
                handleScroll();
            });

            return {
                activeSection,
                scrollTo
            };
        }).mount('#app');
    </script>
</body>

</html>